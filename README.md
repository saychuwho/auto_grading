# Auto Assignment Grading Program Using Shell Scripts - Sample

This repository contains auto assignment grading program using bash shell scripts.

It is aimed to grade assignments in DGIST "CSE201 - Object-Oriented Programming" class.

**This is sample program repository to test features.**

## Tables

- [Auto Assignment Grading Program Using Shell Scripts - Sample](#auto-assignment-grading-program-using-shell-scripts---sample)
  - [Tables](#tables)
  - [How to use](#how-to-use)
    - [Initial setting](#initial-setting)
    - [Required files](#required-files)
    - [Scripts Explanation](#scripts-explanation)
      - [Can be run](#can-be-run)
      - [Do not need to run](#do-not-need-to-run)
    - [Different state of case output](#different-state-of-case-output)
  - [Features](#features)
    - [Unzip student's submission](#unzip-students-submission)
    - [Combine student's submission with grading codes](#combine-students-submission-with-grading-codes)
    - [Compile and execute grading codes](#compile-and-execute-grading-codes)
    - [Analyze outputs of grading code and score codes](#analyze-outputs-of-grading-code-and-score-codes)
  - [Update List](#update-list)

## How to use

### Initial setting

1. Install `git`, `zip`, and `unzip`.
```bash
sudo apt install git zip unzip
```
2. Clone this repository.
```bash
git clone https://github.com/saychuwho/auto_grading.git
```
3. Give permission to shell scripts like this.
```bash
chmod 755 ./sample.sh
chmod 755 ./sample_reset.sh
chmod 755 ./sample_print.sh
```
4. Run `./sample.sh`. 
5. If you want to run `./sample.sh` again, run `./sample_reset.sh` and run `./sample.sh` again.

### Required files

- `sample_student_list.txt`: student id list
- `sample_hw_info.txt`: Assignment information
  - First line: Name of assignment
  - Second line: Number of problems(n) in assignment
  - Third line ~ (n+3) line: Problem name
  - (n+4) line ~ : Problems's test case number
  - Example is below
```
hw1   # Name of assignment
3     # Number of problems in assignment
1     # Name of problem - 1
2     # Name of problem - 2
3     # Name of problem - 3
3     # Number of problem 1's test case
3     # Number of problem 1's test case
3     # Number of problem 1's test case
```
- `sample_hw_info_score.json`: Assignment score information
  - It contains each cases score by state of case output.
  - You need to write more information to run `./sample.sh`
  - Outline of this file can be generated by `./sample_score_info_make.json`
  - Example of outline is like this.
```json
    "1-case-1": {
        "zip-file-not-submitted" : 0,
        "file-not-submitted" : 0,
        "compile-error" : 0.5,
        "fail" : 0,
        "pass" : 1
    },
```
- Inside `./grading_cases/`, you MUST need two files.
  1. Problem-case grading "main.cpp" file. It only contains `main` function of test case.
  2. Case answer output file.

### Scripts Explanation

#### Can be run

- `./sample.sh` : Do all grading process. 
- `./sample_reset.sh` : Delete all files generated by `./sample.sh`

#### Do not need to run

- `./sample_print.sh` : After executing `./sample.sh`, check results that `./sample.sh` made.
  - Usage: `./sample_print.sh student_id`
  - Input `student_id`, and It will make markdown report file.
  - `./sample_print.sh` will automatically run by `./sample.sh`, so you don't need to run.
  - Reports are saved in `./reports/`
  - You can look reports in VScode for better look.
- `./sample_grade.py` : Combine all result files into one `.csv` and calculate total score based on `./sample_hw_info_score.json`.
  - `./sample_result.csv` : Contains all results from result file.
  - `./sample_result_score.csv` : Contains all calculated scores per cases.
  - You don't need to run it manually. It will automatically run by `./sample.sh`
- `./sample_score_info_make.sh` : Make `sample_hw_info_score.json`'s outline file. In this sample program, you don't need to run this.
  
### Different state of case output
- `zip-file-not-submitted` : Student did not submitted `.zip` file
- `file-not-submitted` : Student submitted `.zip` file, but inside `.zip` file, there are no source code
- `compile-error` : Student submitted source code, but case code failed to compile
- `fail` : Student's code is compiled and ran, but output did not match with answer output
- `pass` : Student's code passed case.

## Features

This program will have these features.

- [x] Unzip student's submission
- [x] Combine student's submission with grading codes
- [x] Compile and execute grading codes
- [ ] Analyze outputs of grading code and score codes.

### Unzip student's submission

Unzip student's submission in `./student_submission`. If there are no zip file, student id will not be in `sample_student_list_submitted.txt"

### Combine student's submission with grading codes

Combine student's submission with `.cpp` files inside `./grading_cases` by problem number and cases.

### Compile and execute grading codes

Compile `.cpp` inside `./outputs/sample_{student_id}` and make `*_output.txt`, `*_compile_result.txt`. `*_output_diff.txt`.

### Analyze outputs of grading code and score codes

Analyze `*_output.txt`, `*_compile_result.txt`. `*_output_diff.txt` inside `./outputs/sample_{student_id}` and make result files. 

Result files content combined in `./sample_result.csv`.

Proper problem cases should be in `./grading_cases`.

## Update List

- 2024.09.05 : Change scoring system. Result file is now in .json form
- 2024.09.04 : Updated `sample_guide.py` to calculate scores, add `sample_score_info_make.sh`, `sample_hw_info_score`.json
- 2024.09.04 : Re-design `sample.sh`, `sample_print.sh`. Add `sample_guide.py`
- 2024.09.02 : initial commit. Updated sample program